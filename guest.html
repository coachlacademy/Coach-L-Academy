<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coach L Radio â€“ Guest Studio</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

html, body {
  height:100%;
  font-family:'Segoe UI', sans-serif;
  background:#000;
  color:#fff;
  scroll-behavior:smooth;
}

/* ===== LOGIN GATE ===== */
#loginGate {
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:100;
}
#loginGate h2 { margin-bottom:20px; }
#loginGate input {
  width:220px;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:none;
  font-size:1rem;
}
#loginGate button {
  margin-top:12px;
  padding:10px 22px;
  border:none;
  border-radius:20px;
  background:#ff3366;
  color:#fff;
  font-size:1rem;
  cursor:pointer;
}
#loginMsg {
  margin-top:10px;
  color:#ff4444;
  font-size:0.9rem;
}

/* ===== SCROLL SNAP ===== */
body {
  overflow-y:auto;
  scroll-snap-type:y mandatory;
}

/* ===== TOP UI ===== */
.top-ui {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  z-index:20;
  background:rgba(0,0,0,0.7);
  transition:all 0.6s ease;
}
.top-ui.hidden {
  opacity:0;
  transform:translateY(-100%);
  pointer-events:none;
  display:none;
}

header {
  padding:14px 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header h1 {
  font-size:1rem;
  letter-spacing:1px;
}
.badge {
  background:#e53935;
  padding:6px 12px;
  border-radius:20px;
  font-size:0.7rem;
  font-weight:bold;
}

.notice {
  padding:10px;
  text-align:center;
  font-size:0.8rem;
  color:#ccc;
  border-top:1px solid rgba(255,255,255,0.1);
}

/* ===== SECTIONS ===== */
.section {
  height:100vh;
  width:100%;
  scroll-snap-align:start;
  position:relative;
}

/* ===== IFRAMES ===== */
iframe {
  width:100%;
  height:100%;
  border:none;
}

/* ===== SCROLL ARROW ===== */
.scroll-indicator {
  position:absolute;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  font-size:2rem;
  color:#ff3333;
  animation:bounce 1.5s infinite;
  z-index:10;
}
.scroll-indicator.hide {
  opacity:0;
  transition:opacity 0.5s;
}

@keyframes bounce {
  0%,100% { transform:translate(-50%,0); }
  50% { transform:translate(-50%,10px); }
}

/* ===== EXIT ===== */
#exitBtn {
  position:fixed;
  bottom:20px;
  right:20px;
  background:#ff3366;
  color:#fff;
  padding:10px 18px;
  border-radius:30px;
  font-weight:bold;
  cursor:pointer;
  z-index:30;
}
#exitBtn:hover { opacity:0.9; }

/* ===== FOOTER ===== */
footer {
  padding:20px;
  text-align:center;
  font-size:0.75rem;
  color:#777;
}
</style>
</head>

<body>

<!-- LOGIN GATE -->
<div id="loginGate">
  <h2>Guest DJ Login</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Enter Studio</button>
  <div id="loginMsg"></div>
</div>

<!-- TOP UI -->
<div class="top-ui" id="topUI">
  <header>
    <h1>ðŸŽ™ Coach L Radio â€“ Guest Studio</h1>
    <div class="badge">GUEST DJ</div>
  </header>
  <div class="notice">
    Scroll down after WebDJ loads to join the studio call.
  </div>
</div>

<!-- SECTION 1: WEB DJ -->
<section class="section">
  <iframe
    id="webdj"
    src="https://coach-l-radio.duckdns.org/public/coach-l-radio/dj"
    allow="microphone; autoplay; fullscreen">
  </iframe>
  <div class="scroll-indicator" id="arrow">â¬‡</div>
</section>

<!-- SECTION 2: JITSI -->
<section class="section">
  <iframe
    id="jitsi"
    allow="camera; microphone; fullscreen">
  </iframe>
</section>

<!-- EXIT -->
<button id="exitBtn" onclick="exitGuest()">Exit Studio</button>

<footer>
  Â© 2025 Coach L Radio Â· Inspire â€¢ Teach â€¢ Heal
</footer>

<script>
/* ===== ACCOUNTS ===== */
const accounts = {
  GuestDJ1: "red",
  GuestDJ2: "blue",
  GuestDJ3: "yellow",
  GuestDJ4: "green",
  GuestDJ5: "orange"
};

const loginGate = document.getElementById("loginGate");
const loginMsg = document.getElementById("loginMsg");
const webdj = document.getElementById("webdj");
const jitsi = document.getElementById("jitsi");
const topUI = document.getElementById("topUI");
const arrow = document.getElementById("arrow");

/* ===== LOGIN ===== */
function login() {
  const u = user.value.trim();
  const p = pass.value.trim();
  if (accounts[u] && accounts[u] === p) {
    loginGate.style.display = "none";
    startStudio(u);
  } else {
    loginMsg.textContent = "Invalid guest credentials";
  }
}

/* ===== START STUDIO ===== */
function startStudio(username) {
  jitsi.src =
    "https://meet.jit.si/CoachLGuestRoom" +
    "#userInfo.displayName=" + encodeURIComponent(username) +
    "&config.prejoinPageEnabled=true";
}

/* ===== UI HIDE ON LOAD ===== */
webdj.addEventListener("load", () => {
  setTimeout(() => {
    topUI.classList.add("hidden");
    arrow.classList.add("hide");
  }, 1200);
});

/* ===== RESET WHEN CALL ENDS ===== */
setInterval(() => {
  try {
    const href = jitsi.contentWindow.location.href;
    if (href && !href.includes("CoachLGuestRoom")) {
      jitsi.src = "";
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  } catch(e) {}
}, 2000);

/* ===== EXIT ===== */
function exitGuest() {
  jitsi.src = "";
  window.location.href = "index.html";
}
</script>

</body>
</html>